(function(t){function e(e){for(var o,s,a=e[0],c=e[1],u=e[2],d=0,f=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(e);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={app:0},i=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034b":function(t,e,n){},"034f":function(t,e,n){"use strict";n("85ec")},"13ed":function(t,e,n){},"2a46":function(t,e,n){},"39f4":function(t,e,n){"use strict";n("c0de")},"4b9e":function(t,e,n){"use strict";n("4c50")},"4c50":function(t,e,n){},"526a":function(t,e,n){},"54f9":function(t,e,n){},"557b":function(t,e,n){"use strict";n("54f9")},"56d7":function(t,e,n){"use strict";n.r(e);var o={};n.r(o),n.d(o,"default",(function(){return Re}));var r={};n.r(r),n.d(r,"default",(function(){return De}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),s=n("2ef0"),a=(n("034b"),n("9c30")),c=n("8c4f"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},l=[],d="STORE_FETCHED_CATEGORIES",f="CATEGORIES_LOADED",p="STORE_FETCHED_PAGES",m="STORE_FETCHED_FRONTPAGE",g="PAGES_LOADED",h="STORE_FETCHED_POSTS",v="POSTS_LOADED",b="STORE_FETCHED_FEATURES",y="STORE_SELECT_FEATURE_BY_POST_SLUG",w="FEATURES_LOADED",O="FEATURE_SELECTED",P="STORE_VISIBLE_FEATURES",C="STORE_FETCHED_USER",E="LOGIN_USER",S="LOGOUT_USER",j="INCREMENT_LOADING_PROGRESS",T="RESET_LOADING_PROGRESS",x="VISIBLE_DRAWER",L="VISIBLE_SINGLE",$={mounted:function(){this.$store.commit(x,!0)},beforeDestroy:function(){this.$store.commit(x,!1),this.$store.commit(L,!1)}},A=$,F=n("2877"),R=Object(F["a"])(A,u,l,!1,null,null,null),D=R.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("content-card",[n("md-card-header",[t.currentCategory?n("div",{staticClass:"card-title md-display-1"},[t._v(t._s(t.unescape(t.currentCategory.name)))]):t._e()]),n("md-card-content",[n("md-card-area",[t.currentCategory?n("p",[t._v(t._s(t.currentCategory.description))]):t._e()])],1),t.categoryPosts?n("md-list",{staticClass:"cat-posts md-triple-line"},t._l(t.categoryPosts,(function(e,o){return n("md-list-item",{key:e.id,attrs:{to:e.link_relative}},[e.feature?n("div",{staticClass:"cat-feature-container"},[n("img",{staticClass:"cat-feature",attrs:{src:e.feature.thumbnail}})]):t._e(),n("div",{staticClass:"md-list-item-text"},[n("div",{staticClass:"md-title"},[t._v(t._s(e.title.rendered))]),e.full_name?n("span",[t._v(t._s(e.full_name))]):t._e(),n("div",{domProps:{innerHTML:t._s(e.excerpt.rendered)}})])])})),1):t._e()],1)},I=[],k=n("5530"),U=n("2f62"),W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("Loading...")])},N=[],B={},G=Object(F["a"])(B,W,N,!1,null,null,null),H=G.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("md-card",{staticClass:"content-card",class:[t.feature_img?"feature":"no_feature"]},[t.feature_img?n("md-card-media",[n("img",{attrs:{src:t.feature_img}})]):t._e(),n("md-button",{staticClass:"md-primary md-plain md-mini md-fab md-fab-top-right close",nativeOn:{click:function(e){return t.router.push("/")}}},[n("md-icon",[t._v("close")])],1),t._t("default"),n("transition",{attrs:{name:"loader-animation","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[t.loading?n("md-progress-bar",{attrs:{"md-mode":"indeterminate"}}):t._e()],1),n("md-card-actions",[t.edit_url?n("md-button",{attrs:{href:t.unescape(t.edit_url)}},[t._v("Edit")]):t._e(),n("md-button",{nativeOn:{click:function(e){return t.router.push("/")}}},[t._v("Close")])],1)],2)},z=[],q={LOADING_SEGMENTS:2,API_BASE_PATH:"/wp-json/wp/v2/"},K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("md-content",{staticClass:"post-content",domProps:{innerHTML:t._s(t.content)}})},Z=[],X={data:function(){return{}},props:{content:"",options:{showAuthor:!0}}},J=X,Q=(n("557b"),Object(F["a"])(J,K,Z,!1,null,null,null)),Y=Q.exports,tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["progress loader",{loading:t.showLoader}]},[n("div",{staticClass:"progress-bar",style:t.loaderStyle,attrs:{role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"}})])},et=[],nt={data:function(){return{showLoader:!0}},computed:Object(k["a"])(Object(k["a"])({},Object(U["b"])(["loadingProgress","isLoading"])),{},{loaderStyle:function(){return"width: ".concat(this.loadingProgress,"%;")}}),watch:{isLoading:function(t){console.log("isLoading",t);var e=this;0==t?setTimeout((function(){e.showLoader=!1}),1500):setTimeout((function(){e.showLoader=!0}),100)}}},ot=nt,rt=(n("acdf"),Object(F["a"])(ot,tt,et,!1,null,null,null)),it=rt.exports,st={data:function(){return{router:this.$router}},props:["feature_img","edit_url","loading"],methods:{unescape:function(t){return _.unescape(t)}},mounted:function(){this.$store.commit(L,!0)},update:function(){this.$store.commit(L,!0)},beforeDestroy:function(){this.$store.commit(L,!1)},computed:Object(k["a"])({},Object(U["b"])([])),components:{Loader:H}},at=st,ct=(n("6453"),Object(F["a"])(at,V,z,!1,null,null,null)),ut=ct.exports,lt={data:function(){return{router:this.$router,loadingDispatched:!1}},methods:{unescape:function(t){return _.unescape(t)}},computed:Object(k["a"])(Object(k["a"])({},Object(U["b"])(["page","allPagesLoaded","getPosts","getCategories"])),{},{currentCategory:function(){return _.first(this.getCategories({slug:this.$route.params.categorySlug}))},categoryPosts:function(){var t=this.currentCategory;if(!_.isUndefined(t)){var e=t.id;if("category"==t.taxonomy){this.loadingDispatched||(this.loadingDispatched=!0,this.$store.dispatch("fetchPostTypes",{type:"posts",categories:e,per_page:99}));var n=this.getPosts({categories:e})}else{this.loadingDispatched||(this.loadingDispatched=!0,this.$store.dispatch("fetchPostTypes",{type:"solutions",categories:e,per_page:99}));n=this.getPosts({solution_categories:e});_.isUndefined(n)||n.sort((function(t,e){return e.priority-t.priority})),console.log(n)}return n}}}),beforeRouteUpdate:function(t,e,n){n()},components:{Loader:H,ContentCard:ut}},dt=lt,ft=Object(F["a"])(dt,M,I,!1,null,null,null),pt=ft.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.fProps?n("content-card",{staticClass:"solution-card",attrs:{feature_img:t.getFeatureImage,loading:t.loading,edit_url:t.editUrl}},[n("md-card-header",[n("div",{staticClass:"card-title md-display-1"},[t._v(t._s(t.fProps.title))]),n("div",{staticClass:"card-full-name md-subheading"},[t._v(t._s(t.fProps.full_name))])]),n("md-card-content",[t.postCats?n("md-card-area",[n("category-chips",{attrs:{categories:t.postCats}})],1):t._e(),n("md-card-area",[t.myPost?n("post-content",{attrs:{content:t.myPost.content.rendered,options:{showAuthor:"eee"}}}):t._e()],1),n("md-card-area",[t.fProps.location_name?n("span",[n("md-icon",[t._v("location_on")]),t._v(" "+t._s(t.fProps.location_name)+" ")],1):t._e()]),n("md-card-area",[t.fProps.website?n("span",[n("md-icon",[t._v("language")]),n("a",{attrs:{href:t.fProps.website,target:"_blank"}},[t._v(t._s(t.fProps.website))])],1):t._e()]),n("md-card-area",[t.fProps.contact?n("span",[n("md-icon",[t._v("mail_outline")]),t._v(" "+t._s(t.fProps.contact)+" ")],1):t._e()]),n("md-card-area",{staticClass:"solution-props"},[t.fProps.department?n("span",[n("b",[t._v("Department/s:")]),t._v(" "+t._s(t.fProps.department)+" ")]):t._e()]),n("md-card-area",[t.fProps.deadline?n("span",[n("b",[t._v("Application deadline:")]),t._v(" "+t._s(t.fProps.deadline)+" ")]):t._e()]),n("md-card-area",[n("users-on-post",{attrs:{"post-id":t.fProps.post_id}})],1)],1)],1):t._e()},gt=[],ht=n("bc3a"),_t=n.n(ht),vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"md-layout"},t._l(t.categories,(function(e){return n("div",[n("div",[t.getCat(e)?n("a",{attrs:{href:t.getCat(e).link}},[n("md-chip",{class:[t.getCat(e).slug,"category"],attrs:{title:t.getCat(e).description,"md-clickable":""}},[t._v(t._s(t.unescape(t.getCat(e).name)))])],1):t._e()])])})),0)},bt=[],yt={props:["categories"],computed:Object(k["a"])({},Object(U["b"])(["getCategory"])),methods:{getCat:function(t){return this.getCategory(t)},unescape:function(t){return s["unescape"](t)}}},wt=yt,Ot=Object(F["a"])(wt,vt,bt,!1,null,null,null),Pt=Ot.exports,Ct=function(){var t=this,e=t.$createElement;t._self._c;return t._e()},Et=[],St={data:function(){return{showDialog:!1,vueWp:{},users:{},error:""}},props:["postId"],mounted:function(){console.log(),this.vueWp=window.vueWp,this.doUserAction("get_all_users")},methods:{doUserAction:function(t){var e=this;console.log("doUserAction",t,this.vueWp.ajaxUrl);var n={action:"users_on_post",task:t,post_id:this.postId,user_id:this.vueWp.currentUserId,nonce:this.vueWp.apiNonce};_t.a.get(this.vueWp.ajaxUrl,{params:n}).then((function(n){n.data.success?(e.error="","get_all_users"===t&&(e.users=n.data.data)):e.error=n.data.data,console.log("avresp",n)}))}}},jt=St,Tt=(n("39f4"),Object(F["a"])(jt,Ct,Et,!1,null,"7b8da9a0",null)),xt=Tt.exports,Lt={data:function(){return{router:this.$router,edit:"",loading:!0}},computed:Object(k["a"])(Object(k["a"])({},Object(U["b"])(["getFeatures","getPosts","featuresLoaded"])),{},{myPost:function(){var t=this.getPosts({slug:this.$route.params.postSlug});if(!_.isEmpty(t))return this.loading=!1,_.first(t);console.log("No post found for slug",this.$route.params.postSlug,t)},editUrl:function(){if(this.myPost)return this.myPost.edit_url},postCats:function(){return console.log(this.myPost),!_.isUndefined(this.myPost)&&this.myPost.solution_categories},fProps:function(){var t=this.getFeatures({slug:this.$route.params.postSlug});return _.isUndefined(t)||0==t.length?(console.log("feature was not found",t,"for slug",this.$route.params.postSlug),this.loading=!1,{title:"Looks like this solution does not exist.",full_name:"Check out another one :)"}):_.first(t).properties},getFeatureImage:function(){return this.myPost?this.myPost.feature.large:this.fProps.thumbnail}}),components:{Loader:H,PostContent:Y,ProgressBar:it,ContentCard:ut,CategoryChips:Pt,UsersOnPost:xt},mounted:function(){console.log("solution mounted"),this.init()},update:function(){console.log("solution updated"),this.init()},beforeRouteUpdate:function(t,e,n){n(),this.init()},methods:{init:function(){this.myPost||this.$store.dispatch("fetchPostTypes",{type:"solutions",slug:this.$route.params.postSlug}),this.$store.commit(y,this.$route.params.postSlug)}}},$t=Lt,At=(n("abc5"),Object(F["a"])($t,mt,gt,!1,null,null,null)),Ft=At.exports,Rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.localContent?n("content-card",{attrs:{loading:!t.localContent,edit_url:t.localContent.edit_url,feature_img:t.localContent.feature.large}},[t.localContent?n("md-card-header",[n("div",{staticClass:"md-display-1"},[t._v(t._s(t.localContent.title.rendered))])]):t._e(),n("md-card-content",[n("post-content",{attrs:{content:t.localContent.content.rendered,options:{showAuthor:"eee"}}})],1)],1):t._e()},Dt=[],Mt={data:function(){return{router:this.$router}},props:["postType"],computed:Object(k["a"])(Object(k["a"])({},Object(U["b"])(["getPosts"])),{},{localContent:function(){var t=this.getPosts({slug:this.$route.params.slug});if(!s["isEmpty"](t))return console.log(t),this.$store.commit(j),s["first"](t)}}),mounted:function(){this.fetch()},beforeRouteUpdate:function(t,e,n){n(),this.fetch()},methods:{fetch:function(){s["isEmpty"](this.localContent)&&(this.$store.commit(T),console.log("RESET_LOADING_PROGRESS"),this.$store.dispatch("fetchPostTypes",{type:this.postType,slug:this.$route.params.slug}))}},components:{Loader:H,ContentCard:ut,PostContent:Y}},It=Mt,kt=Object(F["a"])(It,Rt,Dt,!1,null,null,null),Ut=kt.exports;i["default"].use(c["a"]),console.log(vueWp);var Wt=vueWp.path,Nt=new c["a"]({routes:[{path:"/",name:"App"},{path:"/home",name:"Home",component:D,props:{}},{path:"/solution/:postSlug",name:"Solution",component:Ft},{path:"/category*/:categorySlug",name:"Post Category",component:pt},{path:"/solutions*/:categorySlug",name:"Solution Category",component:pt},{path:"/:slug",name:"Page",component:Ut,props:{postType:"pages"}},{path:"/:year/:month/:day/:slug",name:"Post",component:Ut,props:{postType:"posts"}}],mode:"history",base:Wt,duplicateNavigationPolicy:"ignore",scrollBehavior:function(t,e,n){return n||{x:0,y:0}}});Nt.afterEach((function(t){}));var Bt,Gt,Ht,Vt,zt,qt,Kt=Nt,Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["page-wrapper",t.horizontalOrVertial],attrs:{id:"my-app"}},[n("transition",{attrs:{name:"loader-animation","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[n("progress-bar")],1),n("drawer",{attrs:{visible:t.visible_drawer}}),n("a",{attrs:{href:"https://spaces.kisd.de",target:"_self"}},[n("div",{class:["logo-container top",{hidden:t.visible_drawer}],staticStyle:{"z-index":"1"}},[n("md-button",{staticClass:"md-icon-button md-raised md-primary",attrs:{"aria-label":"main-menu-button"}},[n("md-icon",[t._v("menu")])],1)],1)]),n("div",{staticClass:"content-extend"},[n("transition",{attrs:{name:"fade-slide-left",mode:"out-in",appear:""}},[n("router-view",{key:t.$route.params.postSlug})],1)],1),n("swiper",{attrs:{swiperDirection:t.horizontalOrVertial}}),n("solution-map")],1)},Xt=[],Jt=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"map"}})}),Qt=[],Yt=(n("d81d"),n("159b"),{init:function(){if("undefined"!==typeof mapboxThemeSettings.accessToken)return mapboxgl.accessToken=mapboxThemeSettings.accessToken,mapboxThemeSettings.attributionControl=!1,new mapboxgl.Map(mapboxThemeSettings);console.log("No access mapbox token specified. Add one in Backend -> Settings -> General")},getRendered:function(t,e){var n=t.getLayer(e);return"undefined"!==typeof n&&t.queryRenderedFeatures({layers:[e]})},getAllVisible:function(t,e){var n=[],o=this.getRendered(t,"unclustered-point"),r=o.map((function(t){return t.properties.post_id}));n.push.apply(n,o.map((function(t){return t.cluster=!1,t})));var i=this.getRendered(t,"clusters"),s=t.getSource("solutions"),a=[];return i.forEach((function(t){var e=t.properties;a.push(s.getClusterLeaves(e.cluster_id,e.point_count,0,(function(t,o){o.forEach((function(t){r.push(t.properties.post_id)})),n.push.apply(n,o.map((function(t){return t.cluster=e.cluster_id,t})))})))})),new Promise((function(t,e){setTimeout((function(){return t(r)}),2e3)}))},centerOn:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,o=document.getElementById("map").getBoundingClientRect();o.bottom;t.flyTo({center:e,zoom:n})},addEvents:function(t){var e=this;t.on("click","clusters",(function(n){e.getAllVisible(t,n);var o=t.queryRenderedFeatures(n.point,{layers:["clusters"]}),r=o[0].properties.cluster_id;t.getSource("solutions").getClusterExpansionZoom(r,(function(n,r){n||e.centerOn(t,o[0].geometry.coordinates,r)}))})),t.on("mouseenter","clusters",(function(){t.getCanvas().style.cursor="pointer"})),t.on("mouseleave","clusters",(function(){t.getCanvas().style.cursor=""})),t.on("mouseenter","unclustered-point",(function(){t.getCanvas().style.cursor="pointer"})),t.on("mouseleave","unclustered-point",(function(){t.getCanvas().style.cursor=""}))},addData:function(t,e){t.addSource("solutions",{type:"geojson",data:e,cluster:!0,clusterMaxZoom:9,clusterRadius:15,tolerance:3}),t.addLayer({id:"clusters",type:"circle",source:"solutions",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#ED624B",100,"#ED624B",750,"#ED624B"],"circle-radius":["step",["get","point_count"],15,5,20,10,25]}}),t.addLayer({id:"cluster-count",type:"symbol",source:"solutions",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":13},paint:{"text-color":"#fff"}}),t.addLayer({id:"unclustered-point",type:"circle",source:"solutions",filter:["!",["has","point_count"]],paint:{"circle-color":"#ED624B","circle-radius":10,"circle-stroke-width":1,"circle-stroke-color":"#fff"}})}}),te={data:function(){return{post:!1,myMap:!1}},computed:Object(k["a"])({},Object(U["b"])(["getSelected","visible_single","getSelectedFeature"])),mounted:function(){var t=[];this.myMap=Yt.init(),this.myMap.dragRotate.disable(),this.myMap.touchZoomRotate.disableRotation(),this.myMap.addControl(new mapboxgl.NavigationControl({showCompass:!1}),"bottom-left"),this.myMap.addControl(new mapboxgl.AttributionControl({compact:!0}),"bottom-left");var e=!1,n=this;function o(o){!n.myMap.isStyleLoaded()||e||s["isEmpty"](t)||(e=!0,Yt.addData(n.myMap,t),Yt.addEvents(n.myMap),n.myMap.on("click","unclustered-point",(function(t){n.$store.commit(O,t.features[0].properties.feature_id),n.$router.push(t.features[0].properties.link_relative)}))),n.myMap.getSource("solutions")&&n.myMap.isSourceLoaded}n.myMap.on("sourcedata",o),_t.a.get("/wp-json/map/v1/features/solution").then((function(e){t=e.data,o()})),this.myMap.on("moveend",(function(){}))},beforeMount:function(){},watch:{getSelected:function(t,e){var n=document.getElementById("map").getBoundingClientRect(),o=(n.bottom,0);window.innerWidth>650&&this.visible_single&&(o=650+(window.innerWidth-650)/2-window.innerWidth/2),s["isUndefined"](this.getSelectedFeature)||this.myMap.flyTo({center:this.getSelectedFeature.geometry.coordinates,offset:[o,0],zoom:Math.min(this.myMap.getZoom()+1,8)})}},methods:{},components:{}},ee=te,ne=(n("b169"),Object(F["a"])(ee,Jt,Qt,!1,null,null,null)),oe=ne.exports,re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("md-drawer",{staticClass:"md-scrollbar",attrs:{"md-active":t.visible},on:{"update:mdActive":t.active}},[t.myFrontPage?n("div",{staticClass:"wrapper"},[t.myFrontPage.thumbnail?n("div",{staticClass:"drawer-thumbnail",style:{backgroundImage:"url('"+t.myFrontPage.thumbnail+"')"}}):t._e(),n("div",{staticClass:"drawer-content"},[n("div",{staticClass:"md-display-2 drawer-title"},[t._v(t._s(t.myFrontPage.post_title))]),n("post-content",{staticClass:"md-subheading",attrs:{content:t.myFrontPage.post_content,options:{showAuthor:"eee"}}})],1)]):n("div",[n("md-list"),t._v("Loading...")],1),n("SiteFooter")],1)},ie=[],se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[t.footer?n("footer",{staticClass:"site-footer",domProps:{innerHTML:t._s(t.footer)}}):t._e()])},ae=[],ce={data:function(){return{footer:!1}},computed:{},beforeMount:function(){this.getFooter()},methods:{getFooter:function(){var t=this;_t.a.get("/wp-json/map/v1/menus/footer").then((function(e){t.footer=e.data})).catch((function(t){console.log(t)}))}},components:[]},ue=ce,le=(n("9532"),Object(F["a"])(ue,se,ae,!1,null,null,null)),de=le.exports,fe={data:function(){return{}},methods:{active:function(t){!1===t&&(this.$store.commit(x,!1),this.$router.push("/"))}},props:["visible"],computed:Object(k["a"])(Object(k["a"])({},Object(U["b"])(["frontPage","allPagesLoaded"])),{},{myFrontPage:function(){return this.frontPage}}),components:{PostContent:Y,SiteFooter:de}},pe=fe,me=(n("e0fb"),Object(F["a"])(pe,re,ie,!1,null,null,null)),ge=me.exports,he=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["swiper-container my-swiper"]},[n("div",{staticClass:"swiper-wrapper"},t._l(t.getVisibleFeatures,(function(e,o){return n("div",{key:o,class:[{"swiper-slide-active":t.isActiveSlide(o)},"swiper-slide",{hidden:t.isHidden}],staticStyle:{left:"0"}},[n("swiper-card",{attrs:{index:o,feature:e}})],1)})),0)])},_e=[],ve=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("md-card",{staticClass:"swiper-card",class:t.selected?"md-elevation-24-not":"else",attrs:{"md-with-hover":"","md-text-scrim":""},nativeOn:{click:function(e){return t.router.push(t.feature.properties.link_relative)}}},[n("md-card-media-cover",{attrs:{"md-text-scrim":""}},[n("md-card-media",{attrs:{"md-ratio":"16:9"}},[t.feature.properties.thumbnail?n("img",{attrs:{src:t.feature.properties.thumbnail,alt:"Skyscraper"}}):t._e()]),n("md-card-area",[n("md-card-header",[n("span",{staticClass:"md-title"},[t._v(t._s(t.feature.properties.title))]),n("span",{staticClass:"md-subheading"},[t._v(t._s(t.feature.properties.full_name))])])],1)],1)],1)},be=[],ye={props:{feature:{type:Object},index:0},data:function(){return{router:this.$router,selected:!1}},computed:Object(k["a"])({},Object(U["b"])(["getSelected"])),methods:{selectionChanged:function(t){}},components:{},updated:function(){},watch:{}},we=ye,Oe=(n("fe3b"),Object(F["a"])(we,ve,be,!1,null,null,null)),Pe=Oe.exports,Ce={data:function(){return{swiper:!1,isHidden:!0,virtualData:{slides:[]}}},mounted:function(){this.$store.dispatch("getFeatureCollection")},props:["swiperDirection"],components:{SwiperCard:Pe},computed:Object(k["a"])(Object(k["a"])(Object(k["a"])(Object(k["a"])({},Object(U["d"])(["feature.collection"])),Object(U["b"])(["recentPosts","getAllFeatures","getFeatures","getVisibleFeatureIds","featuresLoaded","recentPostsLoaded","getSelected"])),Object(U["c"])({setSlide:O})),{},{getVisibleFeatures:function(){return this.getAllFeatures}}),methods:{initSwiper:function(t){var e=this;e.swiper=new Swiper(".swiper-container",{init:!0,speed:400,spaceBetween:0,slidesPerView:"auto",centeredSlides:"true",slidesPerColumnFill:"column",virtual:{slides:e.getVisibleFeatures,renderExternal:function(t){e.virtualData=t}},direction:e.swiperDirection,lazy:{loadPrevNext:!0},mousewheelSensitivity:2,mousewheel:{invert:!0,forceToAxis:!0}}),setTimeout((function(){e.isHidden=!1,console.log("show swiper")}),1e3),e.swiper.slideTo(3),e.swiper.on("slideChange",(function(){e.$store.commit(O,e.swiper.realIndex)}))},isActiveSlide:function(t){return t==this.swiper.realIndex}},watch:{getAllFeatures:function(t){if(this.swiper)console.log("already setup");else{var e=this;setTimeout((function(){e.initSwiper(t)}),80)}},swiperDirection:function(t){console.log("changed to",t,this.swiper),this.swiper&&this.swiper.changeDirection(t)},getSelected:function(t){if(!this.swiper)return 0;this.swiper.realIndex!=t&&this.swiper.slideToLoop(t)}}},Ee=Ce,Se=(n("4b9e"),Object(F["a"])(Ee,he,_e,!1,null,null,null)),je=Se.exports,Te={data:function(){return{showLoader:!0,router:this.$router,windowWidth:0}},computed:Object(k["a"])(Object(k["a"])({},Object(U["b"])(["frontPage","visible_drawer","visible_single"])),{},{horizontalOrVertial:function(){var t=this.windowWidth<1280?"horizontal":"vertical";return console.log(t),t}}),components:{ProgressBar:it,SolutionMap:oe,Drawer:ge,Swiper:je},watch:{visible_drawer:function(t){return t}},beforeMount:function(){},methods:{updateWindowWidth:function(t){this.windowWidth=document.documentElement.clientWidth}},mounted:function(){var t=this;this.$nextTick((function(){window.addEventListener("resize",s["debounce"](this.updateWindowWidth,300)),this.updateWindowWidth()})),document.body.addEventListener("keyup",(function(e){27===e.keyCode&&t.$router.push("/")})),window.addEventListener("click",(function(e){var n=e.target,o=n.closest("a");if(o&&o.href){var r=e.altKey,i=e.ctrlKey,s=e.metaKey,a=e.shiftKey,c=e.button,u=e.defaultPrevented;if(!(s||r||i||a)&&!u&&(void 0===c||0===c)){if(o&&o.getAttribute){var l=o.getAttribute("target");if(/\b_blank\b/i.test(l))return}var d=new URL(o.href),f=d.pathname;if(o.matches("a[href*='/wp-admin/']")||d.host!=window.location.host)return e.preventDefault(),void window.open(d,"_blank");window.location.pathname!==f&&e.preventDefault&&(e.preventDefault(),t.$router.push(f))}}}))}},xe=Te,Le=(n("034f"),Object(F["a"])(xe,Zt,Xt,!1,null,null,null)),$e=Le.exports,Ae=n("a768"),Fe=n.n(Ae),Re=function(){},De=function(){},Me=n("ade3"),Ie=(n("99af"),n("a15b"),{toQueryString:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n])));return e.length?"?".concat(e.join("&")):""},get:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"posts",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{per_page:10},n=arguments.length>2?arguments[2]:void 0;s["includes"](["post","page"],t)&&console.log("Use plural here, ".concat(t,"s")+" instead of ".concat(t)),_t.a.get(q.API_BASE_PATH+t+this.toQueryString(e)).then((function(t){n(t.data)})).catch((function(n){console.log("something went wrong fetching:",n,"type:",t,"query",e)}))},getById:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post",n=arguments.length>2?arguments[2]:void 0;if(s["isNull"](t)||!s["isNumber"](t))return!1;_t.a.get("".concat(q.API_BASE_PATH+e,"/").concat(t)).then((function(t){n(t)})).catch((function(t){n(t)}))},getFrontPage:function(t){_t.a.get("/wp-json/map/v1/frontpage").then((function(e){t(e.data)})).catch((function(e){t(e)}))}}),ke={error:null,notice:null,loading:!0,loading_progress:0,visible_drawer:!1,visible_single:!1},Ue={isLoading:function(t){return t.loading_progress<100},loadingProgress:function(t){return t.loading_progress},loadingIncrement:function(t){return 100/q.LOADING_SEGMENTS},visible_drawer:function(t){return t.visible_drawer},visible_single:function(t){return t.visible_single}},We={},Ne=(Bt={},Object(Me["a"])(Bt,j,(function(t,e){t.loading_progress=Math.min(t.loading_progress+Ue.loadingIncrement(),100)})),Object(Me["a"])(Bt,T,(function(t){t.loading_progress=0})),Object(Me["a"])(Bt,x,(function(t,e){t.visible_drawer=e})),Object(Me["a"])(Bt,L,(function(t,e){t.visible_single=e})),Bt),Be={state:ke,getters:Ue,actions:We,mutations:Ne},Ge={id:"",logged_in:!1},He={userId:function(t){return t.id}},Ve={},ze=(Gt={},Object(Me["a"])(Gt,C,(function(t,e){var n=e.uid;t.id=n})),Object(Me["a"])(Gt,E,(function(t){t.logged_in=!0})),Object(Me["a"])(Gt,S,(function(t){t.logged_in=!1})),Gt),qe={state:Ge,getters:He,actions:Ve,mutations:ze},Ke=(n("8ba4"),n("a9e3"),n("fb6a"),n("4de4"),n("caad"),n("2532"),n("c740"),{posts:[],recent:[],loaded:!1}),Ze={recentPosts:function(t){return function(e){if(!e||!Number.isInteger(e)||"undefined"===typeof e)return t.recent;var n=t.recent;return n.slice(0,e)}},recentPostsLoaded:function(t){return t.loaded},getPosts:function(t){return function(e){if(t.posts.length){var n=_.keys(e),o=t.posts.filter((function(t){return n.every((function(n){return t[n]instanceof Array?_.includes(t[n],e[n]):t[n]==e[n]}))}));return o}}}},Xe={fetchPostTypes:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.type,r=void 0===o?"posts":o;Ie.get(r,n,(function(t){t?e(h,t):console.log("get went wrong",t)}))}},Je=(Ht={},Object(Me["a"])(Ht,h,(function(t,e){console.log("commit STORE_FETCHED_POSTS",e),e.forEach((function(e){var n=t.posts.findIndex((function(t){return t.id==e.id}));-1==n&&t.posts.push(e)}))})),Object(Me["a"])(Ht,v,(function(t,e){t.loaded=e})),Ht),Qe={state:Ke,getters:Ze,actions:Xe,mutations:Je},Ye={collection:{features:[]},visible:[],selected:0,featuresLoaded:!1},tn={getAllFeatures:function(t){return t.collection.features},getSelected:function(t){return t.selected},getSelectedFeature:function(t){return t.collection.features[t.selected]},getVisibleFeatureIds:function(t){return t.visible},featuresLoaded:function(t){return t.featuresLoaded},selectFeature:function(t){return function(e){var n=t.collection.features.findIndex((function(t){return!_.isUndefined(t.properties)&&t.properties[key]==e[key]}));n>-1?t.selected=n:console.log("no feature found")}},getFeatures:function(t){return function(e){if(t.collection.features.length){var n=_.keys(e),o=t.collection.features.filter((function(t){return n.every((function(n){return t.properties[n]instanceof Array?_.includes(t.properties[n],e[n]):e[n]instanceof Array?_.includes(e[n],t.properties[n]):t.properties[n]==e[n]}))}));return o.sort((function(t,e){return t.priority-e.priority}))}}}},en={getFeatureCollection:function(t){var e=t.commit;_t.a.get("/wp-json/map/v1/features/solution").then((function(t){var n=t.data;e(b,{features:n}),e(j),e(w,!0)})).catch((function(t){console.log(t)}))}},nn=(Vt={},Object(Me["a"])(Vt,b,(function(t,e){var n=e.features;t.collection=n})),Object(Me["a"])(Vt,P,(function(t,e){t.visible=e.slice()})),Object(Me["a"])(Vt,y,(function(t,e){t.collection.features?t.selected=t.collection.features.findIndex((function(t){return t.properties.slug===e})):console.log("selecting features that are not loaded...",e,t.collection.features)})),Object(Me["a"])(Vt,w,(function(t,e){t.featuresLoaded=e})),Object(Me["a"])(Vt,O,(function(t,e){t.collection.features.length||console.log("no features found"),t.selected=e})),Vt),on={state:Ye,getters:tn,actions:en,mutations:nn},rn=n("2909"),sn=(n("a434"),{all:[],frontPage:{},loaded:!1,page:null}),an={allPages:function(t){return t.all},allPagesLoaded:function(t){return t.loaded},page:function(t){return function(e){var n="number"===typeof e?"id":"slug",o=t.all.filter((function(t){return t[n]===e}));return!!o[0]&&o[0]}},pageContent:function(t){return function(e){var n="number"===typeof e?"id":"slug",o=t.all.filter((function(t){return t[n]===e}));return!!o[0]&&o[0].content.rendered}},somePages:function(t){return function(e){if(t.all.length<1)return!1;var n=Object(rn["a"])(t.all);return n.splice(0,Math.min(e,t.all.length))}},frontPage:function(t){return t.frontPage}},cn={getAllPages:function(t){var e=t.commit;this.get("pages",{per_page:10},(function(t){e(p,{pages:t}),e(g,!0),e(j)}))},getFrontPage:function(t){var e=t.commit;Ie.getFrontPage((function(t){e(m,{page:t})}))}},un=(zt={},Object(Me["a"])(zt,p,(function(t,e){var n=e.pages;t.all=n})),Object(Me["a"])(zt,m,(function(t,e){var n=e.page;t.frontPage=n})),Object(Me["a"])(zt,g,(function(t,e){t.loaded=e})),zt),ln={state:sn,getters:an,actions:cn,mutations:un},dn=(n("7db0"),{all:[],loaded:!1}),fn={allCategories:function(t){return t.all},getCategory:function(t){return function(e){return t.all.find((function(t){return t.id==e}))}},allCategoriesLoaded:function(t){return t.loaded},getCategories:function(t){return function(e){if(t.all.length){var n=_.keys(e),o=t.all.filter((function(t){return n.every((function(n){return t[n]==e[n]}))}));return o}}}},pn={fetchTaxonomy:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"categories";Ie.get(n,{sort:"name",hide_empty:"false",per_page:100},(function(t){e(d,{categories:t}),e(f,!0),e(j)}))}},mn=(qt={},Object(Me["a"])(qt,d,(function(t,e){var n=e.categories;_.isUndefined(n)?console.log("no cats fetched."):t.all=n.concat(t.all)})),Object(Me["a"])(qt,f,(function(t,e){t.loaded=e})),qt),gn={state:dn,getters:fn,actions:pn,mutations:mn};i["default"].use(U["a"]);var hn=!1,_n=Fe()({namespace:"Mapper",initialState:{},expires:121e7}),vn=new U["a"].Store({actions:o,getters:r,modules:{hub:Be,user:qe,post:Qe,feature:on,page:ln,categories:gn},strict:hn,plugins:[_n]});n("51de"),n("e094");n("c6e4"),i["default"].use(a["MdButton"]),i["default"].use(a["MdContent"]),i["default"].use(a["MdDrawer"]),i["default"].use(a["MdCard"]),i["default"].use(a["MdChips"]),i["default"].use(a["MdIcon"]),i["default"].use(a["MdProgress"]),i["default"].use(a["MdList"]),i["default"].material.theming.theme="z",new i["default"]({router:Kt,store:vn,render:function(t){return t($e)},el:"#app",created:function(){this.$store.commit(T),this.$store.dispatch("fetchTaxonomy","categories"),this.$store.dispatch("fetchTaxonomy","solution_categories"),this.$store.dispatch("getFrontPage")}})},6453:function(t,e,n){"use strict";n("2a46")},"6a81":function(t,e,n){},"85ec":function(t,e,n){},9532:function(t,e,n){"use strict";n("a143")},a143:function(t,e,n){},abc5:function(t,e,n){"use strict";n("13ed")},acdf:function(t,e,n){"use strict";n("c2d3")},b169:function(t,e,n){"use strict";n("f185")},c0de:function(t,e,n){},c2d3:function(t,e,n){},c6e4:function(t,e,n){"use strict";n.r(e);var o=n("bc3a"),r=n.n(o);try{window._=n("2ef0"),r.a.defaults.headers.common={"X-WP-Nonce":window.vueWp.apiNonce,"X-Requested-With":"XMLHttpRequest"},r.a.defaults.baseURL=window.vueWp.path}catch(i){}},e0fb:function(t,e,n){"use strict";n("6a81")},f185:function(t,e,n){},fe3b:function(t,e,n){"use strict";n("526a")}});
//# sourceMappingURL=app.js.map