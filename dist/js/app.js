(()=>{"use strict";var e={4267:(e,t,s)=>{s.r(t);var o=s(9669),r=s.n(o);try{window._=s(6486),r().defaults.headers.common={"X-WP-Nonce":window.vueWp.apiNonce,"X-Requested-With":"XMLHttpRequest"},r().defaults.baseURL=window.vueWp.path}catch(a){}},5820:(e,t,s)=>{var o={};s.r(o),s.d(o,{default:()=>Tt});var r={};s.r(r),s.d(r,{default:()=>$t});var a=s(144),n=s(6486),i=s(1761),l=s(8345),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div")},c=[];const u="STORE_FETCHED_CATEGORIES",p="CATEGORIES_LOADED",m="STORE_FETCHED_PAGES",g="STORE_FETCHED_FRONTPAGE",h="PAGES_LOADED",f="STORE_FETCHED_POSTS",v="POSTS_LOADED",y="STORE_FETCHED_FEATURES",w="STORE_SELECT_FEATURE_BY_POST_SLUG",b="FEATURES_LOADED",C="FEATURE_SELECTED",S="STORE_VISIBLE_FEATURES",P="STORE_FETCHED_USER",E="LOGIN_USER",T="LOGOUT_USER",$="INCREMENT_LOADING_PROGRESS",x="RESET_LOADING_PROGRESS",L="VISIBLE_DRAWER",A="VISIBLE_SINGLE",O={mounted(){this.$store.commit(L,!0)},beforeDestroy(){this.$store.commit(L,!1),this.$store.commit(A,!1)}},R=O;var F=s(1001),I=(0,F.Z)(R,d,c,!1,null,null,null);const k=I.exports;var D=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("content-card",[s("md-card-header",[e.currentCategory?s("div",{staticClass:"card-title md-display-1"},[e._v(e._s(e.unescape(e.currentCategory.name)))]):e._e()]),s("md-card-content",[s("md-card-area",[e.currentCategory?s("p",[e._v(e._s(e.currentCategory.description))]):e._e()])],1),e.categoryPosts?s("md-list",{staticClass:"cat-posts md-triple-line"},e._l(e.categoryPosts,(function(t,o){return s("md-list-item",{key:t.id,attrs:{to:t.link_relative}},[t.feature?s("div",{staticClass:"cat-feature-container"},[s("img",{staticClass:"cat-feature",attrs:{src:t.feature.thumbnail}})]):e._e(),s("div",{staticClass:"md-list-item-text"},[s("div",{staticClass:"md-title"},[e._v(e._s(t.title.rendered))]),t.full_name?s("span",[e._v(e._s(t.full_name))]):e._e(),s("div",{domProps:{innerHTML:e._s(t.excerpt.rendered)}})])])})),1):e._e()],1)},M=[],U=s(629),B=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._v("Loading...")])},W=[],N={},Z=(0,F.Z)(N,B,W,!1,null,null,null);const G=Z.exports;var H=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("md-card",{staticClass:"content-card",class:[e.feature_img?"feature":"no_feature"]},[e.feature_img?s("md-card-media",[s("img",{attrs:{src:e.feature_img}})]):e._e(),s("md-button",{staticClass:"md-primary md-plain md-mini md-fab md-fab-top-right close",nativeOn:{click:function(t){return e.router.push("/")}}},[s("md-icon",[e._v("close")])],1),e._t("default"),s("transition",{attrs:{name:"loader-animation","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[e.loading?s("md-progress-bar",{attrs:{"md-mode":"indeterminate"}}):e._e()],1),s("md-card-actions",[e.edit_url?s("md-button",{attrs:{href:e.unescape(e.edit_url)}},[e._v("Edit")]):e._e(),s("md-button",{nativeOn:{click:function(t){return e.router.push("/")}}},[e._v("Close")])],1)],2)},j=[];const V={LOADING_SEGMENTS:2,API_BASE_PATH:"/wp-json/wp/v2/"};var z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("md-content",{staticClass:"post-content",domProps:{innerHTML:e._s(e.content)}})},q=[];const K={data(){return{}},props:{content:"",options:{showAuthor:!0}}},X=K;var Q=(0,F.Z)(X,z,q,!1,null,null,null);const Y=Q.exports;var J=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["progress loader",{loading:e.showLoader}]},[s("div",{staticClass:"progress-bar",style:e.loaderStyle,attrs:{role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100"}})])},ee=[];const te={data(){return{showLoader:!0}},computed:{...(0,U.Se)(["loadingProgress","isLoading"]),loaderStyle(){return`width: ${this.loadingProgress}%;`}},watch:{isLoading(e){console.log("isLoading",e);const t=this;0==e?setTimeout((()=>{t.showLoader=!1}),1500):setTimeout((()=>{t.showLoader=!0}),100)}}},se=te;var oe=(0,F.Z)(se,J,ee,!1,null,null,null);const re=oe.exports,ae={data(){return{router:this.$router}},props:["feature_img","edit_url","loading"],methods:{unescape(e){return _.unescape(e)}},mounted(){this.$store.commit(A,!0)},update(){this.$store.commit(A,!0)},beforeDestroy(){this.$store.commit(A,!1)},computed:{...(0,U.Se)([])},components:{Loader:G}},ne=ae;var ie=(0,F.Z)(ne,H,j,!1,null,null,null);const le=ie.exports,de={data(){return{router:this.$router,loadingDispatched:!1}},methods:{unescape(e){return _.unescape(e)}},computed:{...(0,U.Se)(["page","allPagesLoaded","getPosts","getCategories"]),currentCategory(){return _.first(this.getCategories({slug:this.$route.params.categorySlug}))},categoryPosts(){const e=this.currentCategory;if(!_.isUndefined(e)){const{id:s}=e;if("category"==e.taxonomy){this.loadingDispatched||(this.loadingDispatched=!0,this.$store.dispatch("fetchPostTypes",{type:"posts",categories:s,per_page:99}));var t=this.getPosts({categories:s})}else{this.loadingDispatched||(this.loadingDispatched=!0,this.$store.dispatch("fetchPostTypes",{type:"solutions",categories:s,per_page:99}));t=this.getPosts({solution_categories:s});_.isUndefined(t)||t.sort(((e,t)=>t.priority-e.priority)),console.log(t)}return t}}},beforeRouteUpdate(e,t,s){s()},components:{Loader:G,ContentCard:le}},ce=de;var ue=(0,F.Z)(ce,D,M,!1,null,null,null);const pe=ue.exports;var me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.fProps?s("content-card",{staticClass:"solution-card",attrs:{feature_img:e.getFeatureImage,loading:e.loading,edit_url:e.editUrl}},[s("md-card-header",[s("div",{staticClass:"card-title md-display-1"},[e._v(e._s(e.fProps.title))]),s("div",{staticClass:"card-full-name md-subheading"},[e._v(e._s(e.fProps.full_name))])]),s("md-card-content",[e.postCats?s("md-card-area",[s("category-chips",{attrs:{categories:e.postCats}})],1):e._e(),s("md-card-area",[e.myPost?s("post-content",{attrs:{content:e.myPost.content.rendered,options:{showAuthor:"eee"}}}):e._e()],1),s("md-card-area",[e.fProps.location_name?s("span",[s("md-icon",[e._v("location_on")]),e._v(" "+e._s(e.fProps.location_name)+" ")],1):e._e()]),s("md-card-area",[e.fProps.website?s("span",[s("md-icon",[e._v("language")]),s("a",{attrs:{href:e.fProps.website,target:"_blank"}},[e._v(e._s(e.fProps.website))])],1):e._e()]),s("md-card-area",[e.fProps.contact?s("span",[s("md-icon",[e._v("mail_outline")]),e._v(" "+e._s(e.fProps.contact)+" ")],1):e._e()]),s("md-card-area",{staticClass:"solution-props"},[e.fProps.department?s("span",[s("b",[e._v("Department/s:")]),e._v(" "+e._s(e.fProps.department)+" ")]):e._e()]),s("md-card-area",[e.fProps.deadline?s("span",[s("b",[e._v("Application deadline:")]),e._v(" "+e._s(e.fProps.deadline)+" ")]):e._e()]),s("md-card-area",[s("users-on-post",{attrs:{"post-id":e.fProps.post_id}})],1)],1)],1):e._e()},ge=[],he=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"md-layout"},e._l(e.categories,(function(t){return s("div",[s("div",[e.getCat(t)?s("a",{attrs:{href:e.getCat(t).link}},[s("md-chip",{class:[e.getCat(t).slug,"category"],attrs:{title:e.getCat(t).description,"md-clickable":""}},[e._v(e._s(e.unescape(e.getCat(t).name)))])],1):e._e()])])})),0)},fe=[];const _e={props:["categories"],computed:{...(0,U.Se)(["getCategory"])},methods:{getCat(e){return this.getCategory(e)},unescape(e){return n.unescape(e)}}},ve=_e;var ye=(0,F.Z)(ve,he,fe,!1,null,null,null);const we=ye.exports;var be=function(){var e=this,t=e.$createElement,s=e._self._c||t;return this.loading?s("div",{key:e.componentKey,staticClass:"md-card-area users solution-props"},[this.emtpyUsers?s("b",[e._v(" No users connected to this school yet:")]):s("b",[e._v("User/s connected to this school:")]),s("ul",{staticClass:"post-images small no-bullet flex padding-left-0"},[e._l(e.users,(function(e){return s("li",{key:e.ID,staticClass:"avatar-container",attrs:{title:e.display_name}},[s("a",{staticClass:"clipped square",attrs:{href:e.user_profile_url,target:"_blank"}},[s("img",{staticClass:"avatar avatar-36 photo",attrs:{alt:"",src:e.user_avatar,height:"36",width:"36",loading:"lazy"}})])])})),e.showRemoveButton?s("a",{staticClass:"alert user md-button",attrs:{href:"#",title:"remove me from the list"},on:{click:function(t){return e.doUserAction("remove_user")}}},[s("i",{staticClass:"md-icon md-icon-font md-theme-z"},[e._v("person_remove")]),e._v(" Remove me")]):s("a",{staticClass:"success md-button",attrs:{href:"#",title:"Add me to the list"},on:{click:function(t){return e.doUserAction("add_user")}}},[s("i",{staticClass:"md-icon  md-icon-font md-theme-z"},[e._v("person_add")]),e._v(" Add me ")])],2),this.error?s("md-chip",{staticClass:"md-accent",attrs:{"md-deletable":""}},[e._v(e._s(this.error))]):e._e()],1):e._e()},Ce=[],Se=s(9669),Pe=s.n(Se);const Ee={data:()=>({componentKey:"",showRemoveButton:!1,emtpyUsers:!1,loading:!1,vueWp:{},users:{},error:""}),props:["postId"],mounted(){this.vueWp=window.vueWp,this.doUserAction("get_all_users")},methods:{checkCurrentUserIn(){if(!this.users||!this.users.length)return this.showRemoveButton=!1,void(this.emtpyUsers=!0);for(var e=0;e<this.users.length;e++){if(this.vueWp.currentUserId==this.users[e].ID)return this.showRemoveButton=!0,void(this.emtpyUsers=!1);this.showRemoveButton=!1,this.emtpyUsers=!1}},doUserAction(e){const t={action:"users_on_post",task:e,post_id:this.postId,user_id:this.vueWp.currentUserId,nonce:this.vueWp.apiNonce};Pe().get(this.vueWp.ajaxUrl,{params:t}).then((t=>{t.data.success?(this.error="","get_all_users"===e&&(this.users=t.data.data),"add_user"!==e&&"remove_user"!==e||this.doUserAction("get_all_users"),this.checkCurrentUserIn(),this.loading=!0):this.error=t.data.data}))}}},Te=Ee;var $e=(0,F.Z)(Te,be,Ce,!1,null,"44e61107",null);const xe=$e.exports,Le={data(){return{router:this.$router,edit:"",loading:!0}},computed:{...(0,U.Se)(["getFeatures","getPosts","featuresLoaded"]),myPost(){const e=this.getPosts({slug:this.$route.params.postSlug});if(!_.isEmpty(e))return this.loading=!1,_.first(e);console.log("No post found for slug",this.$route.params.postSlug,e)},editUrl(){if(this.myPost)return this.myPost.edit_url},postCats(){return console.log(this.myPost),!_.isUndefined(this.myPost)&&this.myPost.solution_categories},fProps(){const e=this.getFeatures({slug:this.$route.params.postSlug});return _.isUndefined(e)||0==e.length?(console.log("feature was not found",e,"for slug",this.$route.params.postSlug),this.loading=!1,{title:"Looks like this solution does not exist.",full_name:"Check out another one :)"}):_.first(e).properties},getFeatureImage(){return this.myPost?this.myPost.feature.large:this.fProps.thumbnail}},components:{Loader:G,PostContent:Y,ProgressBar:re,ContentCard:le,CategoryChips:we,UsersOnPost:xe},mounted(){console.log("solution mounted"),this.init()},update(){console.log("solution updated"),this.init()},beforeRouteUpdate(e,t,s){s(),this.init()},methods:{init(){this.myPost||this.$store.dispatch("fetchPostTypes",{type:"solutions",slug:this.$route.params.postSlug}),this.$store.commit(w,this.$route.params.postSlug)}}},Ae=Le;var Oe=(0,F.Z)(Ae,me,ge,!1,null,null,null);const Re=Oe.exports;var Fe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.localContent?s("content-card",{attrs:{loading:!e.localContent,edit_url:e.localContent.edit_url,feature_img:e.localContent.feature.large}},[e.localContent?s("md-card-header",[s("div",{staticClass:"md-display-1"},[e._v(e._s(e.localContent.title.rendered))])]):e._e(),s("md-card-content",[s("post-content",{attrs:{content:e.localContent.content.rendered,options:{showAuthor:"eee"}}})],1)],1):e._e()},Ie=[];const ke={data(){return{router:this.$router}},props:["postType"],computed:{...(0,U.Se)(["getPosts"]),localContent(){const e=this.getPosts({slug:this.$route.params.slug});if(!n.isEmpty(e))return console.log(e),this.$store.commit($),n.first(e)}},mounted(){this.fetch()},beforeRouteUpdate(e,t,s){s(),this.fetch()},methods:{fetch(){n.isEmpty(this.localContent)&&(this.$store.commit(x),console.log("RESET_LOADING_PROGRESS"),this.$store.dispatch("fetchPostTypes",{type:this.postType,slug:this.$route.params.slug}))}},components:{Loader:G,ContentCard:le,PostContent:Y}},De=ke;var Me=(0,F.Z)(De,Fe,Ie,!1,null,null,null);const Ue=Me.exports;a["default"].use(l.Z),console.log(vueWp);const Be=vueWp.path,We=new l.Z({routes:[{path:"/",name:"App"},{path:"/home",name:"Home",component:k,props:{}},{path:"/solution/:postSlug",name:"Solution",component:Re},{path:"/category*/:categorySlug",name:"Post Category",component:pe},{path:"/solutions*/:categorySlug",name:"Solution Category",component:pe},{path:"/:slug",name:"Page",component:Ue,props:{postType:"pages"}},{path:"/:year/:month/:day/:slug",name:"Post",component:Ue,props:{postType:"posts"}}],mode:"history",base:Be,duplicateNavigationPolicy:"ignore",scrollBehavior(e,t,s){return s||{x:0,y:0}}});We.afterEach((e=>{}));const Ne=We;var Ze=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["page-wrapper",e.horizontalOrVertial],attrs:{id:"my-app"}},[s("transition",{attrs:{name:"loader-animation","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[s("progress-bar")],1),s("drawer",{attrs:{visible:e.visible_drawer}}),s("a",{attrs:{href:"https://spaces.kisd.de",target:"_self"}},[s("div",{class:["logo-container top",{hidden:e.visible_drawer}],staticStyle:{"z-index":"1"}},[s("md-button",{staticClass:"md-icon-button md-raised md-primary",attrs:{"aria-label":"main-menu-button"}},[s("md-icon",[e._v("menu")])],1)],1)]),s("div",{staticClass:"content-extend"},[s("transition",{attrs:{name:"fade-slide-left",mode:"out-in",appear:""}},[s("router-view",{key:e.$route.params.postSlug})],1)],1),s("swiper",{attrs:{swiperDirection:e.horizontalOrVertial}}),s("solution-map")],1)},Ge=[],He=(s(4916),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"map"}})}),je=[];const Ve={init(){if("undefined"!==typeof mapboxThemeSettings.accessToken)return mapboxgl.accessToken=mapboxThemeSettings.accessToken,mapboxThemeSettings.attributionControl=!1,new mapboxgl.Map(mapboxThemeSettings);console.log("No access mapbox token specified. Add one in Backend -> Settings -> General")},getRendered(e,t){const s=e.getLayer(t);return"undefined"!==typeof s&&e.queryRenderedFeatures({layers:[t]})},getAllVisible(e,t){const s=[],o=this.getRendered(e,"unclustered-point"),r=o.map((e=>e.properties.post_id));s.push.apply(s,o.map((e=>(e.cluster=!1,e))));const a=this.getRendered(e,"clusters"),n=e.getSource("solutions"),i=[];return a.forEach((e=>{const t=e.properties;i.push(n.getClusterLeaves(t.cluster_id,t.point_count,0,((e,o)=>{o.forEach((e=>{r.push(e.properties.post_id)})),s.push.apply(s,o.map((e=>(e.cluster=t.cluster_id,e))))})))})),new Promise(((e,t)=>{setTimeout((()=>e(r)),2e3)}))},centerOn(e,t,s=3){const o=document.getElementById("map").getBoundingClientRect();o.bottom;e.flyTo({center:t,zoom:s})},addEvents(e){const t=this;e.on("click","clusters",(s=>{t.getAllVisible(e,s);const o=e.queryRenderedFeatures(s.point,{layers:["clusters"]}),r=o[0].properties.cluster_id;e.getSource("solutions").getClusterExpansionZoom(r,((s,r)=>{s||t.centerOn(e,o[0].geometry.coordinates,r)}))})),e.on("mouseenter","clusters",(()=>{e.getCanvas().style.cursor="pointer"})),e.on("mouseleave","clusters",(()=>{e.getCanvas().style.cursor=""})),e.on("mouseenter","unclustered-point",(()=>{e.getCanvas().style.cursor="pointer"})),e.on("mouseleave","unclustered-point",(()=>{e.getCanvas().style.cursor=""}))},addData(e,t){e.addSource("solutions",{type:"geojson",data:t,cluster:!0,clusterMaxZoom:9,clusterRadius:15,tolerance:3}),e.addLayer({id:"clusters",type:"circle",source:"solutions",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#ED624B",100,"#ED624B",750,"#ED624B"],"circle-radius":["step",["get","point_count"],15,5,20,10,25]}}),e.addLayer({id:"cluster-count",type:"symbol",source:"solutions",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":13},paint:{"text-color":"#fff"}}),e.addLayer({id:"unclustered-point",type:"circle",source:"solutions",filter:["!",["has","point_count"]],paint:{"circle-color":"#ED624B","circle-radius":10,"circle-stroke-width":1,"circle-stroke-color":"#fff"}})}},ze={data(){return{post:!1,myMap:!1}},computed:{...(0,U.Se)(["getSelected","visible_single","getSelectedFeature"])},mounted(){let e=[];this.myMap=Ve.init(),this.myMap.dragRotate.disable(),this.myMap.touchZoomRotate.disableRotation(),this.myMap.addControl(new mapboxgl.NavigationControl({showCompass:!1}),"bottom-left"),this.myMap.addControl(new mapboxgl.AttributionControl({compact:!0}),"bottom-left");let t=!1;const s=this;function o(o){!s.myMap.isStyleLoaded()||t||n.isEmpty(e)||(t=!0,Ve.addData(s.myMap,e),Ve.addEvents(s.myMap),s.myMap.on("click","unclustered-point",(e=>{s.$store.commit(C,e.features[0].properties.feature_id),s.$router.push(e.features[0].properties.link_relative)}))),s.myMap.getSource("solutions")&&s.myMap.isSourceLoaded}s.myMap.on("sourcedata",o),Pe().get("/wp-json/map/v1/features/solution").then((t=>{e=t.data,o()})),this.myMap.on("moveend",(()=>{}))},beforeMount(){},watch:{getSelected(e,t){const s=document.getElementById("map").getBoundingClientRect();s.bottom;let o=0;window.innerWidth>650&&this.visible_single&&(o=650+(window.innerWidth-650)/2-window.innerWidth/2),n.isUndefined(this.getSelectedFeature)||this.myMap.flyTo({center:this.getSelectedFeature.geometry.coordinates,offset:[o,0],zoom:Math.min(this.myMap.getZoom()+1,8)})}},methods:{},components:{}},qe=ze;var Ke=(0,F.Z)(qe,He,je,!1,null,null,null);const Xe=Ke.exports;var Qe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("md-drawer",{staticClass:"md-scrollbar",attrs:{"md-active":e.visible},on:{"update:mdActive":e.active}},[e.myFrontPage?s("div",{staticClass:"wrapper"},[e.myFrontPage.thumbnail?s("div",{staticClass:"drawer-thumbnail",style:{backgroundImage:"url('"+e.myFrontPage.thumbnail+"')"}}):e._e(),s("div",{staticClass:"drawer-content"},[s("div",{staticClass:"md-display-2 drawer-title"},[e._v(e._s(e.myFrontPage.post_title))]),s("post-content",{staticClass:"md-subheading",attrs:{content:e.myFrontPage.post_content,options:{showAuthor:"eee"}}})],1)]):s("div",[s("md-list"),e._v("Loading...")],1),s("SiteFooter")],1)},Ye=[],Je=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"fade"}},[e.footer?s("footer",{staticClass:"site-footer",domProps:{innerHTML:e._s(e.footer)}}):e._e()])},et=[];const tt={data(){return{footer:!1}},computed:{},beforeMount(){this.getFooter()},methods:{getFooter(){Pe().get("/wp-json/map/v1/menus/footer").then((e=>{this.footer=e.data})).catch((e=>{console.log(e)}))}},components:[]},st=tt;var ot=(0,F.Z)(st,Je,et,!1,null,null,null);const rt=ot.exports,at={data(){return{}},methods:{active(e){!1===e&&(this.$store.commit(L,!1),this.$router.push("/"))}},props:["visible"],computed:{...(0,U.Se)(["frontPage","allPagesLoaded"]),myFrontPage(){return this.frontPage}},components:{PostContent:Y,SiteFooter:rt}},nt=at;var it=(0,F.Z)(nt,Qe,Ye,!1,null,null,null);const lt=it.exports;var dt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["swiper-container my-swiper"]},[s("div",{staticClass:"swiper-wrapper"},e._l(e.getVisibleFeatures,(function(t,o){return s("div",{key:o,class:[{"swiper-slide-active":e.isActiveSlide(o)},"swiper-slide",{hidden:e.isHidden}],staticStyle:{left:"0"}},[s("swiper-card",{attrs:{index:o,feature:t}})],1)})),0)])},ct=[],ut=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("md-card",{staticClass:"swiper-card",class:e.selected?"md-elevation-24-not":"else",attrs:{"md-with-hover":"","md-text-scrim":""},nativeOn:{click:function(t){return e.router.push(e.feature.properties.link_relative)}}},[s("md-card-media-cover",{attrs:{"md-text-scrim":""}},[s("md-card-media",{attrs:{"md-ratio":"16:9"}},[e.feature.properties.thumbnail?s("img",{attrs:{src:e.feature.properties.thumbnail,alt:"Skyscraper"}}):e._e()]),s("md-card-area",[s("md-card-header",[s("span",{staticClass:"md-title"},[e._v(e._s(e.feature.properties.title))]),s("span",{staticClass:"md-subheading"},[e._v(e._s(e.feature.properties.full_name))])])],1)],1)],1)},pt=[];const mt={props:{feature:{type:Object},index:0},data(){return{router:this.$router,selected:!1}},computed:{...(0,U.Se)(["getSelected"])},methods:{selectionChanged(e){}},components:{},updated(){},watch:{}},gt=mt;var ht=(0,F.Z)(gt,ut,pt,!1,null,null,null);const ft=ht.exports,_t={data(){return{swiper:!1,isHidden:!0,virtualData:{slides:[]}}},mounted(){this.$store.dispatch("getFeatureCollection")},props:["swiperDirection"],components:{SwiperCard:ft},computed:{...(0,U.rn)(["feature.collection"]),...(0,U.Se)(["recentPosts","getAllFeatures","getFeatures","getVisibleFeatureIds","featuresLoaded","recentPostsLoaded","getSelected"]),...(0,U.OI)({setSlide:C}),getVisibleFeatures(){return this.getAllFeatures}},methods:{initSwiper(e){const t=this;t.swiper=new Swiper(".swiper-container",{init:!0,speed:400,spaceBetween:0,slidesPerView:"auto",centeredSlides:"true",slidesPerColumnFill:"column",virtual:{slides:t.getVisibleFeatures,renderExternal(e){t.virtualData=e}},direction:t.swiperDirection,lazy:{loadPrevNext:!0},mousewheelSensitivity:2,mousewheel:{invert:!0,forceToAxis:!0}}),setTimeout((()=>{t.isHidden=!1,console.log("show swiper")}),1e3),t.swiper.slideTo(3),t.swiper.on("slideChange",(()=>{t.$store.commit(C,t.swiper.realIndex)}))},isActiveSlide(e){return e==this.swiper.realIndex}},watch:{getAllFeatures(e){if(this.swiper)return void console.log("already setup");const t=this;setTimeout((()=>{t.initSwiper(e)}),80)},swiperDirection(e){console.log("changed to",e,this.swiper),this.swiper&&this.swiper.changeDirection(e)},getSelected(e){if(!this.swiper)return 0;this.swiper.realIndex!=e&&this.swiper.slideToLoop(e)}}},vt=_t;var yt=(0,F.Z)(vt,dt,ct,!1,null,null,null);const wt=yt.exports,bt={data(){return{showLoader:!0,router:this.$router,windowWidth:0}},computed:{...(0,U.Se)(["frontPage","visible_drawer","visible_single"]),horizontalOrVertial(){const e=this.windowWidth<1280?"horizontal":"vertical";return console.log(e),e}},components:{ProgressBar:re,SolutionMap:Xe,Drawer:lt,Swiper:wt},watch:{visible_drawer(e){return e}},beforeMount(){},methods:{updateWindowWidth(e){this.windowWidth=document.documentElement.clientWidth}},mounted(){this.$nextTick((function(){window.addEventListener("resize",n.debounce(this.updateWindowWidth,300)),this.updateWindowWidth()})),document.body.addEventListener("keyup",(e=>{27===e.keyCode&&this.$router.push("/")})),window.addEventListener("click",(e=>{const{target:t}=e,s=t.closest("a");if(!s)return;if(!s.href)return;const{altKey:o,ctrlKey:r,metaKey:a,shiftKey:n,button:i,defaultPrevented:l}=e;if(a||o||r||n)return;if(l)return;if(void 0!==i&&0!==i)return;if(s&&s.getAttribute){const e=s.getAttribute("target");if(/\b_blank\b/i.test(e))return}const d=new URL(s.href),c=d.pathname;if(s.matches("a[href*='/wp-admin/']")||d.host!=window.location.host)return e.preventDefault(),void window.open(d,"_blank");window.location.pathname!==c&&e.preventDefault&&(e.preventDefault(),this.$router.push(c))}))}},Ct=bt;var St=(0,F.Z)(Ct,Ze,Ge,!1,null,null,null);const Pt=St.exports;var Et=s(9058);const Tt=()=>{},$t=()=>{},xt={toQueryString(e){const t=[];for(const s in e)e.hasOwnProperty(s)&&t.push(`${encodeURIComponent(s)}=${encodeURIComponent(e[s])}`);return t.length?`?${t.join("&")}`:""},get(e="posts",t={per_page:10},s){n.includes(["post","page"],e)&&console.log(`Use plural here, ${e}s instead of ${e}`),Pe().get(V.API_BASE_PATH+e+this.toQueryString(t)).then((e=>{s(e.data)})).catch((s=>{console.log("something went wrong fetching:",s,"type:",e,"query",t)}))},getById(e,t="post",s){if(n.isNull(e)||!n.isNumber(e))return!1;Pe().get(`${V.API_BASE_PATH+t}/${e}`).then((e=>{s(e)})).catch((e=>{s(e)}))},getFrontPage(e){Pe().get("/wp-json/map/v1/frontpage").then((t=>{e(t.data)})).catch((t=>{e(t)}))}},Lt={error:null,notice:null,loading:!0,loading_progress:0,visible_drawer:!1,visible_single:!1},At={isLoading:e=>e.loading_progress<100,loadingProgress:e=>e.loading_progress,loadingIncrement:e=>100/V.LOADING_SEGMENTS,visible_drawer:e=>e.visible_drawer,visible_single:e=>e.visible_single},Ot={},Rt={[$](e,t){e.loading_progress=Math.min(e.loading_progress+At.loadingIncrement(),100)},[x](e){e.loading_progress=0},[L](e,t){e.visible_drawer=t},[A](e,t){e.visible_single=t}},Ft={state:Lt,getters:At,actions:Ot,mutations:Rt},It={id:"",logged_in:!1},kt={userId:e=>e.id},Dt={},Mt={[P](e,{uid:t}){e.id=t},[E](e){e.logged_in=!0},[T](e){e.logged_in=!1}},Ut={state:It,getters:kt,actions:Dt,mutations:Mt};s(6699);const Bt={posts:[],recent:[],loaded:!1},Wt={recentPosts:e=>t=>{if(!t||!Number.isInteger(t)||"undefined"===typeof t)return e.recent;const{recent:s}=e;return s.slice(0,t)},recentPostsLoaded:e=>e.loaded,getPosts:e=>t=>{if(!e.posts.length)return;const s=_.keys(t),o=e.posts.filter((e=>s.every((s=>e[s]instanceof Array?_.includes(e[s],t[s]):e[s]==t[s]))));return o}},Nt={fetchPostTypes({commit:e},t={}){const{type:s="posts"}=t;xt.get(s,t,(t=>{t?e(f,t):console.log("get went wrong",t)}))}},Zt={[f](e,t){console.log("commit STORE_FETCHED_POSTS",t),t.forEach((t=>{const s=e.posts.findIndex((e=>e.id==t.id));-1==s&&e.posts.push(t)}))},[v](e,t){e.loaded=t}},Gt={state:Bt,getters:Wt,actions:Nt,mutations:Zt},Ht={collection:{features:[]},visible:[],selected:0,featuresLoaded:!1},jt={getAllFeatures:e=>e.collection.features,getSelected:e=>e.selected,getSelectedFeature:e=>e.collection.features[e.selected],getVisibleFeatureIds:e=>e.visible,featuresLoaded:e=>e.featuresLoaded,selectFeature:e=>t=>{const s=e.collection.features.findIndex((e=>!_.isUndefined(e.properties)&&e.properties[key]==t[key]));s>-1?e.selected=s:console.log("no feature found")},getFeatures:e=>t=>{if(!e.collection.features.length)return;const s=_.keys(t),o=e.collection.features.filter((e=>s.every((s=>e.properties[s]instanceof Array?_.includes(e.properties[s],t[s]):t[s]instanceof Array?_.includes(t[s],e.properties[s]):e.properties[s]==t[s]))));return o.sort(((e,t)=>e.priority-t.priority))}},Vt={getFeatureCollection({commit:e}){Pe().get("/wp-json/map/v1/features/solution").then((t=>{const s=t.data;e(y,{features:s}),e($),e(b,!0)})).catch((e=>{console.log(e)}))}},zt={[y](e,{features:t}){e.collection=t},[S](e,t){e.visible=t.slice()},[w](e,t){e.collection.features?e.selected=e.collection.features.findIndex((e=>e.properties.slug===t)):console.log("selecting features that are not loaded...",t,e.collection.features)},[b](e,t){e.featuresLoaded=t},[C](e,t){e.collection.features.length||console.log("no features found"),e.selected=t}},qt={state:Ht,getters:jt,actions:Vt,mutations:zt},Kt={all:[],frontPage:{},loaded:!1,page:null},Xt={allPages:e=>e.all,allPagesLoaded:e=>e.loaded,page:e=>t=>{const s="number"===typeof t?"id":"slug",o=e.all.filter((e=>e[s]===t));return!!o[0]&&o[0]},pageContent:e=>t=>{const s="number"===typeof t?"id":"slug",o=e.all.filter((e=>e[s]===t));return!!o[0]&&o[0].content.rendered},somePages:e=>t=>{if(e.all.length<1)return!1;const s=[...e.all];return s.splice(0,Math.min(t,e.all.length))},frontPage:e=>e.frontPage},Qt={getAllPages({commit:e}){this.get("pages",{per_page:10},(t=>{e(m,{pages:t}),e(h,!0),e($)}))},getFrontPage({commit:e}){xt.getFrontPage((t=>{e(g,{page:t})}))}},Yt={[m](e,{pages:t}){e.all=t},[g](e,{page:t}){e.frontPage=t},[h](e,t){e.loaded=t}},Jt={state:Kt,getters:Xt,actions:Qt,mutations:Yt},es={all:[],loaded:!1},ts={allCategories:e=>e.all,getCategory:e=>t=>e.all.find((e=>e.id==t)),allCategoriesLoaded:e=>e.loaded,getCategories:e=>t=>{if(!e.all.length)return;const s=_.keys(t),o=e.all.filter((e=>s.every((s=>e[s]==t[s]))));return o}},ss={fetchTaxonomy({commit:e},t="categories"){xt.get(t,{sort:"name",hide_empty:"false",per_page:100},(t=>{e(u,{categories:t}),e(p,!0),e($)}))}},os={[u](e,{categories:t}){_.isUndefined(t)?console.log("no cats fetched."):e.all=t.concat(e.all)},[p](e,t){e.loaded=t}},rs={state:es,getters:ts,actions:ss,mutations:os};a["default"].use(U.ZP);const as=!1,ns=(0,Et.ZP)({namespace:"Mapper",initialState:{},expires:121e7}),is=new U.ZP.Store({actions:o,getters:r,modules:{hub:Ft,user:Ut,post:Gt,feature:qt,page:Jt,categories:rs},strict:as,plugins:[ns]});window.Vue=a["default"],s(4267),a["default"].use(i.MdButton),a["default"].use(i.MdContent),a["default"].use(i.MdDrawer),a["default"].use(i.MdCard),a["default"].use(i.MdChips),a["default"].use(i.MdIcon),a["default"].use(i.MdProgress),a["default"].use(i.MdList),a["default"].material.theming.theme="z",new a["default"]({router:Ne,store:is,render:e=>e(Pt),el:"#app",created(){this.$store.commit(x),this.$store.dispatch("fetchTaxonomy","categories"),this.$store.dispatch("fetchTaxonomy","solution_categories"),this.$store.dispatch("getFrontPage")}})}},t={};function s(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=e,(()=>{var e=[];s.O=(t,o,r,a)=>{if(!o){var n=1/0;for(c=0;c<e.length;c++){for(var[o,r,a]=e[c],i=!0,l=0;l<o.length;l++)(!1&a||n>=a)&&Object.keys(s.O).every((e=>s.O[e](o[l])))?o.splice(l--,1):(i=!1,a<n&&(n=a));if(i){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,r,a]}})(),(()=>{s.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return s.d(t,{a:t}),t}})(),(()=>{s.d=(e,t)=>{for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}})(),(()=>{s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{var e={143:0};s.O.j=t=>0===e[t];var t=(t,o)=>{var r,a,[n,i,l]=o,d=0;if(n.some((t=>0!==e[t]))){for(r in i)s.o(i,r)&&(s.m[r]=i[r]);if(l)var c=l(s)}for(t&&t(o);d<n.length;d++)a=n[d],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(c)},o=globalThis["webpackChunkstarter"]=globalThis["webpackChunkstarter"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=s.O(void 0,[998],(()=>s(5820)));o=s.O(o)})();
//# sourceMappingURL=app.js.map